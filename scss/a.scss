/**
 * @author      OA Wu <comdan66@gmail.com>
 * @copyright   Copyright (c) 2016 OA Wu Design
 */

@import "_oa";

#ct {
  position: fixed;
  top: 0;
  left: -100%;
  display: inline-block;
  width: 100%;
  height: 100%;
  z-index: 40;
  background-color: rgba(39, 40, 34, .5);
  @include opacity(0);
  @include transition(all .3s);
}
#lt {
  @media screen and (min-width: 0px) and (max-width: #{$mediaMobileWidth - 1px}) {
    $w: 220px;
    right: -$w;
    width: $w;
  }
  @media screen and (min-width: #{$mediaMobileWidth}) {
    $w: 450px;
    right: -$w;
    width: $w;
  }
  position: fixed;
  top: 0;
  display: inline-block;
  height: 100%;
  z-index: 41;
  -webkit-overflow-scrolling: touch;
  background: $mainBackgroundColor $mainBackgroundImage;
  overflow: hidden;
  overflow-y: scroll;
  @include box-shadow(0 0 5px 1px rgba(39, 40, 34, .3), 1px 0 1px rgba(39, 40, 34, .3));
  @include opacity(0);
  @include transition(all .3s);
  $h: 100px;
  &.ok {
    &:before, &:after {
      display: none;
    }
  }
  &:before, &:after {
    position: absolute;
    display: inline-block;
  }
  &:before {
    content: '讀取中..';
    top: calc((100% - 40px) / 2);
    left: calc((100% - 100px) / 2);
    width: 100px;
    height: 33px;
    line-height: 31px;
    z-index: 2;
    background-color: rgba(255, 255, 255, 1);
    @include border-radius(3px);
    @include box-shadow(0 0 5px rgba(39, 40, 34, .5), 0 0 1px rgba(39, 40, 34, .5));
  }
  &:after {
    content: '';
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(39, 40, 34, .3);
    z-index: 1;
  }
  
  > div {
    display: inline-block;
    width: 100%;    
    height: $h;
    border-top: 1px solid rgba(39, 40, 34, .3);
    padding: 5px;
    background-color: rgba(255, 255, 255, 1);
    
    #meg {
      @include textarea;
      width: 100%;
      height: 50px;
      margin-top: 5px;
      @include border-radius(0);
      border-color: transparent;
      &[disabled] {
        color: rgba(50, 50, 50, 0.3);
      }
    }
    #send {
      @include button;
      width: 100%;
      padding: 5px 15px;
      margin-top: 5px;
    }
  }
  label {
    overflow: hidden;
    overflow-y: auto;
    display: inline-block;
    width: 100%;
    height: calc(100% - #{$h});
    -webkit-overflow-scrolling: touch;
    @include box-shadow(inset 0 1px 2px rgba(39, 40, 34, .3));
    
    > time {
      &:first-child {
        margin-top: 15px;
      }
      display: inline-block;
      width: 100%;
      font-size: 10px;
      color: rgba(39, 40, 34, .4);
      position: relative;

      + div {
        margin-top: 5px;
      }
      &:before, &:after {
        content: '';
        position: absolute;
        top: 50%;
        left: 10px;
        height: 1px;
        width: 30%;
        background-color: rgba(39, 40, 34, .2);
      }
      &:after {
        left: auto;
        right: 10px;
      }
    }
    > div {
      display: inline-block;
      width: 100%;
      padding: 5px;
      margin: 0;
      text-align: left;
      position: relative;
      padding-left: 30px;
      
      + div {
        margin-top: 5px;
      }
      + time {
        margin-top: 5px;
      }

      &:before {
        position: absolute;
        top: 3px;
        left: 3px;
        border: 1px solid rgba(89, 89, 89, .7);
        font-size: 20px;
        padding-top: 1px;
        display: inline-block;
        width: 20px;
        height: 20px;
        text-align: center;
        overflow: hidden;
        // background-color: rgba(255, 255, 255, 1);
        @include border-radius(50%);
      }
      span {
        position: relative;
        display: inline-block;
        border: 1px solid rgba(143, 144, 141, .7);
        word-wrap: break-word; 
        word-break: break-all;
        min-height: 21px;
        background-color: rgba(255, 255, 255, 1);
        padding: 3px;
        @include border-radius(3px);
        
        &:after, &:before {right: 100%;top: 10px;border: solid transparent;content: " ";height: 0;width: 0;position: absolute;pointer-events: none;}
        &:after {border-color: transparent;border-right-color: rgba(255, 255, 255, 1);border-width: 4px;margin-top: -4px;}
        &:before {border-color: rgba(194, 225, 245, 0);border-right-color: rgba(100, 100, 100, .6);border-width: 4px + 1px;margin-top: -4px - 1px;}
      }
      &.my {
        text-align: right;
        padding-left: 0;
        padding-right: 30px;

        &:before {
          right: 3px;
          left: auto;
        }
        span {
          &:after, &:before {right: auto;left: 100%;border: solid transparent;}
          &:after {border-left-color: rgba(255, 255, 255, 1);;border-width: 4px;margin-top: -4px;}
          &:before {border-left-color: rgba(100, 100, 100, .6);;border-width: 4px + 1px;margin-top: -4px - 1px;}
        }
      }
    }
  }
}